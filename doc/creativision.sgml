<!doctype linuxdoc system>

<article>
<title>VTech Creativision (aka Funvision) specific information for cc65
<author><url url="mailto:polluks+cc65@sdf.lonestar.org" name="Stefan A. Haubenthal">

<abstract>
An overview over the Creativision runtime system as it is implemented for the
cc65 C compiler.
</abstract>

<!-- Table of contents -->
<toc>

<!-- Begin the document -->

<sect>Overview<p>

This file contains an overview of the Creativision runtime system as it comes
with the cc65 C compiler. It describes the memory layout, Creativision specific header
files, available drivers, and any pitfalls specific to that platform.

Please note that Creativision specific functions are just mentioned here, they are
described in detail in the separate <url url="funcref.html" name="function
reference">. Even functions marked as "platform dependent" may be available on
more than one platform. Please see the function reference for more information.


<sect>Binary format<p>

The standard binary output format generated by the linker for the Creativision target
is a 4 KB ROM image. To create an 8 KB ROM a custom linker script has
to be used.

<sect>Memory layout<p>

cc65 generated programs with the default setup are 4 KB in size,
occupying &dollar;B000 - &dollar;BFFF. Usable memory space for the
user program is &dollar;B000 - &dollar;BEFF. &dollar;BF00 -
&dollar;BFFF is reserved for the runtime and cartridge configuration
area.

Special locations:

<descrip>
  <tag/Text screen/
  The text screen is located at VRAM &dollar;1000.

  <tag/Stack/
  The C runtime stack is located at &dollar;03FF and growing downwards.

  <tag/RAM/
  The available RAM for cc65 programs of an unexpanded Creativision
  starts at &dollar;01FA and ends at &dollar;03FF.

  <tag/Heap/
  The C heap is located at the end of the program's data area and
  grows towards the C runtime stack.

</descrip><p>



<sect>Platform specific header files<p>

Programs containing Creativision specific code may use the <tt/creativision.h/ header file.


<sect1>Creativision specific functions<p>

<itemize>
<item>bios_playsound
<item>psg_delay
<item>psg_outb
<item>psg_silence
</itemize>



<!--<sect1>Hardware access<p>

The following pseudo variables declared in the <tt/creativision.inc/ include file do
allow access to hardware located in the address space.

<descrip>

  <tag><tt/VDP/</tag>
  The <tt/VDP/ defines allow access to the video chip.

</descrip><p>

<descrip>

  <tag><tt/PIA/</tag>
  The <tt/PIA/ defines allow access to the I/O chip.

</descrip><p>-->



<sect>Loadable drivers<p>

<sect1>Graphics drivers<p>

No graphics drivers are currently available for the Creativision.


<sect1>Extended memory drivers<p>

No extended memory drivers are currently available for the Creativision.


<sect1>Joystick drivers<p>

<descrip>

  <tag><tt/creativision-stdjoy.joy (creativisionstd_joy)/</tag>
  A joystick driver for the standard joystick is available.

</descrip><p>

<sect1>Mouse drivers<p>

No mouse drivers are currently available for the Creativision.


<sect1>RS232 device drivers<p>

No communication port drivers are currently available for the Creativision.



<sect>Limitations<p>

<sect1>Disk I/O<p>

The existing library for the Creativision doesn't implement C file
I/O. There are even no hacks for the <tt/read()/ and <tt/write()/ routines.

To be more concrete, this limitation means that you cannot use any of the
following functions (and a few others):

<itemize>
<item>fclose
<item>fopen
<item>fread
<item>fprintf
<item>fputc
<item>fscanf
<item>fwrite
<item>...
</itemize>



<sect>Other hints<p>



<sect>License<p>

This software is provided 'as-is', without any expressed or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:

<enum>
<item>  The origin of this software must not be misrepresented; you must not
        claim that you wrote the original software. If you use this software
        in a product, an acknowledgment in the product documentation would be
        appreciated but is not required.
<item>  Altered source versions must be plainly marked as such, and must not
        be misrepresented as being the original software.
<item>  This notice may not be removed or altered from any source
        distribution.
</enum>

</article>
